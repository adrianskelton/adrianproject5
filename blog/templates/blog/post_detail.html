{% extends 'base.html' %}

{% block content %}
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <article>
          {% if post.image %}
            <img src="{{ post.image.url }}" alt="{{ post.title }}" class="img-fluid rounded blog-image">
          {% endif %}
          <h2>{{ post.title }}</h2>
          <p>{{ post.pub_date|date:"F j, Y" }}</p>
          <p>{{ post.content }}</p>
        </article>
      </div>
    </div>
    <!-- Comments -->
      <div class="row">
        <div class="col-md-12">
        <section>
          <h3>Comments</h3>
          {% for comment in comments %}
            <div class="mb-12">
              <p>{{ comment.author }} said on {{ comment.pub_date|date:"F j, Y" }}:</p>
              <p>{{ comment.text }}</p>
            </div>
          {% endfor %}

          <!-- Comment form -->
          <div class="card">
            <div class="card-body">
              <form method="post" action="{% url 'post_detail' post_id=post.id %}">
                {% csrf_token %}
                {{ comment_form.as_p }}
                <button type="submit" class="btn btn-primary">Add Comment</button>
              </form>
            </div>
          </div>
        </section>
      </div>
      </div>
    </div>
  </div>
{% endblock %}
